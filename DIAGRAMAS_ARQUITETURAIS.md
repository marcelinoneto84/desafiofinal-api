# ğŸ“Š Diagramas Arquiteturais Complementares

## ğŸ—ï¸ Arquitetura Geral do Sistema

```
                    ğŸŒ Internet / Cliente
                            â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚               â”‚               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
    â”‚   Cliente     â”‚ â”‚  Produto  â”‚ â”‚   Pedido    â”‚
    â”‚   Service     â”‚ â”‚  Service  â”‚ â”‚   Service   â”‚
    â”‚   Port 8081   â”‚ â”‚ Port 8082 â”‚ â”‚  Port 8083  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
            â”‚               â”‚               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
    â”‚  H2 Database  â”‚ â”‚H2 Databaseâ”‚ â”‚ H2 Database â”‚
    â”‚   clientes    â”‚ â”‚ produtos  â”‚ â”‚   pedidos   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Fluxo de ComunicaÃ§Ã£o entre MicroserviÃ§os

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Consulta de Detalhes do Pedido              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1ï¸âƒ£  Cliente/Postman                  
    â”‚                                 
    â”‚ GET /pedidos/1/detalhes         
    â–¼                                 
2ï¸âƒ£  PedidoController                  
    â”‚                                 
    â”‚ findDetalhesById(1)             
    â–¼                                 
3ï¸âƒ£  PedidoService                     
    â”‚                                 
    â”œâ”€â–º PedidoRepository.findById(1) â”€â”€â–º ğŸ“Š H2 Database (pedidos)
    â”‚   â†³ retorna: Pedido entity
    â”‚
    â”œâ”€â–º ServiceLocator.findClienteById(clienteId)
    â”‚   â”‚
    â”‚   â””â”€â–º HTTP GET localhost:8081/clientes/{id}
    â”‚       â†³ retorna: ClienteDto
    â”‚
    â”œâ”€â–º ServiceLocator.findProdutoById(produtoId)  
    â”‚   â”‚
    â”‚   â””â”€â–º HTTP GET localhost:8082/produtos/{id}
    â”‚       â†³ retorna: ProdutoDto
    â”‚
    â””â”€â–º PedidoDetalheDto.builder()
        â”œâ”€ dados do pedido
        â”œâ”€ dados do cliente (via HTTP)
        â”œâ”€ dados do produto (via HTTP)
        â”œâ”€ cÃ¡lculos (valor unitÃ¡rio)
        â””â”€ formataÃ§Ãµes (descriÃ§Ã£o status)
        â†“
4ï¸âƒ£  Retorna JSON completo ao cliente
```

## ğŸ›ï¸ PadrÃ£o MVC por MicroserviÃ§o

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CLIENTE SERVICE (8081)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“± CONTROLLER         ğŸ—ï¸ SERVICE          ğŸ“‹ MODEL             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ClienteControllerâ”‚  â”‚ ClienteService  â”‚ â”‚    Cliente      â”‚  â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚ â”‚                 â”‚  â”‚
â”‚  â”‚ @GetMapping     â”‚â”€â”€â”‚ findAll()       â”‚â”€â”‚ @Entity         â”‚  â”‚
â”‚  â”‚ @PostMapping    â”‚  â”‚ save()          â”‚ â”‚ @Id Long id     â”‚  â”‚
â”‚  â”‚ @PutMapping     â”‚  â”‚ findById()      â”‚ â”‚ String nome     â”‚  â”‚
â”‚  â”‚ @DeleteMapping  â”‚  â”‚ deleteById()    â”‚ â”‚ String email    â”‚  â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚ â”‚ Integer score   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â”‚                     â”‚                    â”‚          â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                 â”‚                               â”‚
â”‚  ğŸ—„ï¸ REPOSITORY                  â”‚        âš™ï¸ CONFIG             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ClienteRepositoryâ”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚   DataLoader    â”‚      â”‚
â”‚  â”‚                 â”‚                   â”‚                 â”‚      â”‚
â”‚  â”‚ extends JPA     â”‚                   â”‚ @Component      â”‚      â”‚
â”‚  â”‚ findByNome()    â”‚                   â”‚ CommandLineRunnerâ”‚      â”‚
â”‚  â”‚ countClientes() â”‚                   â”‚ popula dados    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ PadrÃµes de Projeto Implementados

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        BUILDER PATTERN                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   PedidoDetalheDto detalhes = PedidoDetalheDto.builder()        â”‚
â”‚       .id(pedido.getId())                     âœ¨ Fluent API    â”‚
â”‚       .quantidade(pedido.getQuantidade())     âœ¨ Legibilidade   â”‚  
â”‚       .valorTotal(pedido.getValorTotal())     âœ¨ Imutabilidade  â”‚
â”‚       .cliente(clienteDto)                    âœ¨ Flexibilidade  â”‚
â”‚       .produto(produtoDto)                                      â”‚
â”‚       .valorUnitario(calcularValor(...))                       â”‚
â”‚       .build();                              âœ… Objeto Criado  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SERVICE LOCATOR PATTERN                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  @Service                                                       â”‚
â”‚  public class ExternalServiceLocator {                          â”‚
â”‚                                                                 â”‚
â”‚    ğŸ” findClienteById(Long id)                                  â”‚
â”‚      â”œâ”€ HTTP GET localhost:8081/clientes/{id}                   â”‚
â”‚      â”œâ”€ âœ… Success â†’ return ClienteDto                          â”‚
â”‚      â””â”€ âŒ Error â†’ return FallbackClienteDto                    â”‚
â”‚                                                                 â”‚
â”‚    ğŸ” findProdutoById(Long id)                                  â”‚
â”‚      â”œâ”€ HTTP GET localhost:8082/produtos/{id}                   â”‚
â”‚      â”œâ”€ âœ… Success â†’ return ProdutoDto                          â”‚
â”‚      â””â”€ âŒ Error â†’ return FallbackProdutoDto                    â”‚
â”‚                                                                 â”‚
â”‚    âœ¨ BenefÃ­cios:                                               â”‚
â”‚      â”œâ”€ CentralizaÃ§Ã£o da lÃ³gica de descoberta                   â”‚
â”‚      â”œâ”€ ImplementaÃ§Ã£o de circuit breaker                        â”‚
â”‚      â”œâ”€ Facilita testes e mocking                               â”‚
â”‚      â””â”€ Reduz acoplamento entre serviÃ§os                        â”‚
â”‚  }                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      REPOSITORY PATTERN                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  public interface ClienteRepository                             â”‚
â”‚                   extends JpaRepository<Cliente, Long> {        â”‚
â”‚                                                                 â”‚
â”‚    ğŸ” List<Cliente> findByNome(String nome);                    â”‚
â”‚       â””â”€ Query Method automatica do Spring Data                 â”‚
â”‚                                                                 â”‚
â”‚    ğŸ” @Query("SELECT COUNT(c) FROM Cliente c")                  â”‚
â”‚       Long countClientes();                                     â”‚
â”‚       â””â”€ Query customizada com JPQL                             â”‚
â”‚                                                                 â”‚
â”‚    âœ¨ Abstrai complexidade do acesso a dados                    â”‚
â”‚    âœ¨ Fornece CRUD automÃ¡tico                                   â”‚ 
â”‚    âœ¨ Permite queries customizadas                              â”‚
â”‚  }                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Monitoramento e Observabilidade (Futuro)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     OBSERVABILITY STACK                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸ“Š Metrics           ğŸ“ Logs              ğŸ” Tracing           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ Prometheus  â”‚      â”‚ ELK Stack   â”‚     â”‚   Zipkin    â”‚       â”‚
â”‚  â”‚ Micrometer  â”‚      â”‚ Logback     â”‚     â”‚ Sleuth      â”‚       â”‚
â”‚  â”‚ Grafana     â”‚      â”‚ Structured  â”‚     â”‚ Distributed â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚        â”‚                     â”‚                   â”‚              â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                              â”‚                                  â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚              â”‚     Spring Boot Actuator     â”‚                  â”‚
â”‚              â”‚        Health Checks         â”‚                  â”‚
â”‚              â”‚         /actuator/*          â”‚                  â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ Pipeline de Deploy (Futuro)

```
  ğŸ“ CÃ³digo      ğŸ”¨ Build       ğŸ§ª Test       ğŸ“¦ Package     ğŸš€ Deploy
     â”‚             â”‚             â”‚             â”‚              â”‚
â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
â”‚  Git    â”‚   â”‚ Gradle  â”‚   â”‚  JUnit  â”‚   â”‚ Docker  â”‚   â”‚ K8s/AWS â”‚
â”‚ GitHub  â”‚â”€â”€â–¶â”‚  Build  â”‚â”€â”€â–¶â”‚ Postman â”‚â”€â”€â–¶â”‚ Images  â”‚â”€â”€â–¶â”‚ ECS/GKE â”‚
â”‚ Commit  â”‚   â”‚ Test    â”‚   â”‚TestNG   â”‚   â”‚Registry â”‚   â”‚ Deploy  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚             â”‚             â”‚             â”‚              â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚             â”‚             â”‚
              âœ… Success     âŒ Fail      ğŸ”„ Rollback
```